<!DOCTYPE html>
<html lang="en">
<head>
  <title>QS Demo</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body style="background-color: #FAF3E7;">
    
  <!-- START: Navbar code -->
  <!-- Contains image and dropdown -->
    <nav class="navbar bg-light">
        <div class="container-fluid justify-content-end">
          <a class="navbar-brand">
            <img src="/static/user.png" alt="Logo" width="25" height="25" class="d-inline-block align-text-top">
          </a>
            <div class="dropdown-center">
                <button id="btnMain" type="button" class="btn btn-secondary btn-sm dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                Select the name
                </button>
                <ul class="dropdown-menu dropdown-menu-dark menu dropdown-menu-end" aria-labelledby="btnMain">
                    <li><button class="dropdown-item" type="button" onclick="showOne()">John Dorsey</button></li>
                    <li><button class="dropdown-item" type="button" onclick="showTwo()">Ruben Hall</button></li>
                    <li><button class="dropdown-item" type="button" onclick="showThree()">Gary Garcia</button></li>
                </ul>
            </div>
          </div>
      </nav>
  <!-- END: Navbar code -->
  
    <div class="container-fluid p-5 text-white text-center" style="background-color: #F27444; height: 150;">
      <h1>Query Service Demo</h1>  
    </div>

    <div class="container mt-5">
        <div class="row">
          <div class="col-sm-5 rounded-5" style="background-color: #F27444;color: #FAF3E7;">
            <h3 class="d-flex justify-content-center mt-3">Order</h3>
            <p class="d-flex justify-content-center">Order Details</p>
            
            <!-- START: Order Details Table -->
            <table id="orderTable" class="table table-bordered table-hover table-sm mb-4" style="color: #FAF3E7;">
            </table>
            <!-- END: Order Details Table -->  
          </div>

        <!-- START: Divider code -->
          <div class="col-sm-2">
            <div class="d-flex justify-content-center mt-2" style="height: 375px;">
                <div class="vr" style="width: 3;"></div>
              </div>
        </div>
        <!-- END: Divider code -->

        <div class="col-sm-5 rounded-5" style="background-color: #F27444; color: #FAF3E7;">
            <h3 class="d-flex justify-content-center mt-3">Final</h3>
        
        <!-- START: TLV and Final amount Table -->
            <table id="finalTable" class = "table table-bordered table-hover table-sm mb-4 mt-5" style="color: #FAF3E7;">
            </table>
        <!-- END: TLV and Final amount Table -->

        </div>

  <script>
    // Three Names hard-coded with data from raw_customers.csv (https://storage.googleapis.com/clearscape_analytics_demo_data/DEMO_dbtAdvanced/raw_customers.csv)
    const nameOne   =   "John Dorsey"; // 752,John,Dorsey,peter68@example.net
    const nameTwo   =   "Ruben Hall"; //  129,Ruben,Hall,kparker@example.net
    const nameThree =   "Gary Garcia";//  155,Gary,Garcia,sarahmcdowell@example.com
    // -------------------xxx--------------------
    var data        =   {{ all_data|tojson }}; // TLV data from qs_demo.py file
    // customers_tlv.csv data placeholder
    let email; 
    let boughtItems;
    let tlv;
    let lastOrdered;
    //---------------xxx----------------

    // START: Page one associated to line 73 variable (John Dorsey)
    function showOne(){
        document.getElementById("orderTable").innerHTML = ""; // clear Order table
        document.getElementById("finalTable").innerHTML = ""; // clear TLV and Final amount table
        document.getElementById("btnMain").innerHTML = nameOne; // assigns name to the dropdown
      // START: Order Table data insertion
        let tableOne = document.getElementById("orderTable");

        // START: Row One
        let rowOne = tableOne.insertRow(0);
        rowOne.insertCell(0).innerText = "Product";
        rowOne.insertCell(1).innerText = "Quantity";
        rowOne.insertCell(2).innerText = "Price(in $)";
        // END: Row One
        // START: Row Two
        let rowTwo = tableOne.insertRow(1);
        rowTwo.insertCell(0).innerText = "Dish Soap";
        rowTwo.insertCell(1).innerText = "2";
        rowTwo.insertCell(2).innerText = "16";
        // END: Row Two
        // START: Row Three
        let rowThree = tableOne.insertRow(2);
        rowThree.insertCell(0).innerText = "Laundry Detergent";
        rowThree.insertCell(1).innerText = "1";
        rowThree.insertCell(2).innerText = "15";
        // END: Row Three
        // START: Row Four
        let rowFour = tableOne.insertRow(3);
        rowFour.insertCell(0).innerText = "Hand Soap";
        rowFour.insertCell(1).innerText = "2";
        rowFour.insertCell(2).innerText = "16";
        // END: Row Four
        // START: Row Five
        let rowFive = tableOne.insertRow(4);
        rowFive.insertCell(0).innerText = "Shaving Cream";
        rowFive.insertCell(1).innerText = "1";
        rowFive.insertCell(2).innerText = "8";
        // END: Row Five
        // START: Row Six
        let rowSix = tableOne.insertRow(5);
        cell = rowSix.insertCell(0);
        cell.colSpan = "2";
        cell.innerHTML = "Sub-Total";
        rowSix.insertCell(1).innerText = "$63";
        // END: Row Six
      // END: Order Table data insertion

      // START: TLV and Final amount table data insertion
        let finalTableOne = document.getElementById("finalTable");
        // START: Your Order Row
        let rowFinalOne = finalTableOne.insertRow(0);
        finalCell = rowFinalOne.insertCell(0);
        finalCell.colSpan = "2";
        finalCell.innerHTML = "Your Order:";
        // END: Your Order Row
        // START: Total amount Row
        let rowTotal = finalTableOne.insertRow(1);
        rowTotal.insertCell(0).innerText = "Total";
        rowTotal.insertCell(1).innerText = "63";
        // END: Total amount Row
        // START: Loyalty Discount Row
        let rowLoyalty = finalTableOne.insertRow(2);

        // START: Loyalty Discount Calculation
        for (var i=0;i<Object.keys(data).length; i++){
            if(data[i][0] == 752){
                email = data[i][1];
                boughtItems = data[i][2];
                tlv = data[i][3];
                lastOrdered = data[i][4];
            } else {
                // Assign default values
            }
        }

        // -----     **YTD**   -----
        // -----     Put       ----- 
        // -----  calculation  ----- 
        // -----     here      ----- 
        
        // END: Loyalty Discount Calculation
        
        // START: Loyalty Discount Row
        rowLoyalty.insertCell(0).innerText = "Loyalty Bonus";
        rowLoyalty.insertCell(1).innerText = "10";
        // END: Loyalty Discount Row
        // START: Final Amount To Pay Row
        let rowAmount = finalTableOne.insertRow(3);
        rowAmount.insertCell(0).innerText = "Amount To Pay";
        rowAmount.insertCell(1).innerText = "53";
        // END: Final Amount To Pay Row
      // START: TLV and Final amount table data insertion
    }
    // END: Page one associated to line 73 variable (John Dorsey)

    // ***Same design as showOne() function (from line 84 to line 175)***
    // START: Page one associated to line 74 variable (Ruben Hall)
    function showTwo(){
        document.getElementById("orderTable").innerHTML = ""; // clear Order table
        document.getElementById("finalTable").innerHTML = ""; // clear TLV and Final amount table
        document.getElementById("btnMain").innerHTML = nameTwo; // assigns name to the dropdown
        
        let tableTwo = document.getElementById("orderTable");
        
        let rowOne = tableTwo.insertRow(0);
        rowOne.insertCell(0).innerText = "Product";
        rowOne.insertCell(1).innerText = "Quantity";
        rowOne.insertCell(2).innerText = "Price(in $)";

        let rowTwo = tableTwo.insertRow(1);
        rowTwo.insertCell(0).innerText = "Shampoo";
        rowTwo.insertCell(1).innerText = "1";
        rowTwo.insertCell(2).innerText = "12";

        let rowThree = tableTwo.insertRow(2);
        rowThree.insertCell(0).innerText = "Body Wash";
        rowThree.insertCell(1).innerText = "1";
        rowThree.insertCell(2).innerText = "15";

        let rowFour = tableTwo.insertRow(3);
        rowFour.insertCell(0).innerText = "Conditioner";
        rowFour.insertCell(1).innerText = "1";
        rowFour.insertCell(2).innerText = "12";

        let rowFive = tableTwo.insertRow(4);
        rowFive.insertCell(0).innerText = "Mouthwash";
        rowFive.insertCell(1).innerText = "2";
        rowFive.insertCell(2).innerText = "16";

        let rowSix = tableTwo.insertRow(5);
        cell = rowSix.insertCell(0);
        cell.colSpan = "2";
        cell.innerHTML = "Sub-Total";
        rowSix.insertCell(1).innerText = "$55";

        let finalTableTwo = document.getElementById("finalTable");

        let rowFinalOne = finalTableTwo.insertRow(0);
        finalCell = rowFinalOne.insertCell(0);
        finalCell.colSpan = "2";
        finalCell.innerHTML = "Your Order:";

        let rowTotal = finalTableTwo.insertRow(1);
        rowTotal.insertCell(0).innerText = "Total";
        rowTotal.insertCell(1).innerText = "55";

        let rowLoyalty = finalTableTwo.insertRow(2);

        // Loyalty calculation
        for (var i=0;i<Object.keys(data).length; i++){
            if(data[i][0] == 129){
                email = data[i][1];
                boughtItems = data[i][2];
                tlv = data[i][3];
                lastOrdered = data[i][4];
            } else {
                // Assign default values
            }
        }
        
        rowLoyalty.insertCell(0).innerText = "Loyalty Bonus";
        rowLoyalty.insertCell(1).innerText = "5";

        let rowAmount = finalTableTwo.insertRow(3);
        rowAmount.insertCell(0).innerText = "Amount To Pay";
        rowAmount.insertCell(1).innerText = "50";

    }
    // END: Page one associated to line 74 variable (Ruben Hall)

    // ***Same design as showOne() function (from line 84 to line 175)***
    // START: Page one associated to line 75 variable (Gary Garcia)
    function showThree(){
        document.getElementById("orderTable").innerHTML = ""; // clear Order table
        document.getElementById("finalTable").innerHTML = ""; // clear TLV and Final amount table
        document.getElementById("btnMain").innerHTML = nameThree; // assigns name to the dropdown

        let tableThree = document.getElementById("orderTable");
        
        let rowOne = tableThree.insertRow(0);
        rowOne.insertCell(0).innerText = "Product"
        rowOne.insertCell(1).innerText = "Quantity"
        rowOne.insertCell(2).innerText = "Price(in $)"

        
        let rowTwo = tableThree.insertRow(1);
        rowTwo.insertCell(0).innerText = "Light Bulbs"
        rowTwo.insertCell(1).innerText = "5"
        rowTwo.insertCell(2).innerText = "20"

        let rowThree = tableThree.insertRow(2);
        rowThree.insertCell(0).innerText = "Batteries"
        rowThree.insertCell(1).innerText = "4"
        rowThree.insertCell(2).innerText = "40"

        let rowFour = tableThree.insertRow(3);
        rowFour.insertCell(0).innerText = "Broom"
        rowFour.insertCell(1).innerText = "2"
        rowFour.insertCell(2).innerText = "24"

        let rowFive = tableThree.insertRow(4);
        rowFive.insertCell(0).innerText = "Plastic Wrap"
        rowFive.insertCell(1).innerText = "2"
        rowFive.insertCell(2).innerText = "12"

        let rowSix = tableThree.insertRow(5);
        cell = rowSix.insertCell(0);
        cell.colSpan = "2";
        cell.innerHTML = "Sub-Total";
        rowSix.insertCell(1).innerText = "$96";

        let finalTableThree = document.getElementById("finalTable");

        let rowFinalOne = finalTableThree.insertRow(0);
        finalCell = rowFinalOne.insertCell(0);
        finalCell.colSpan = "2";
        finalCell.innerHTML = "Your Order:";

        let rowTotal = finalTableThree.insertRow(1);
        rowTotal.insertCell(0).innerText = "Total";
        rowTotal.insertCell(1).innerText = "96";

        let rowLoyalty = finalTableThree.insertRow(2);

        // Loyalty calculation
        for (var i=0;i<Object.keys(data).length; i++){
            if(data[i][0] == 688){
                email = data[i][1];
                boughtItems = data[i][2];
                tlv = data[i][3];
                lastOrdered = data[i][4];
            } else {
                // Assign default values
            }
        }

        rowLoyalty.insertCell(0).innerText = "Loyalty Bonus";
        rowLoyalty.insertCell(1).innerText = "15";

        let rowAmount = finalTableThree.insertRow(3);
        rowAmount.insertCell(0).innerText = "Amount To Pay";
        rowAmount.insertCell(1).innerText = "81";
    }
    // END: Page one associated to line 75 variable (Gary Garcia)
  </script>
</body>
</html>